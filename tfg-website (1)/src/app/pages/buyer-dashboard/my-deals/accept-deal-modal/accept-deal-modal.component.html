<div class="modal-content">
    <div class="modal-header">
        <button class="btn-close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-xl-7 col-lg-7 col-md-7 col-sm-12">
                <div class="img-block">
                    <img [src]="item?.imgUrl" class="img-fluid" alt="pic">
                </div>
                <div class="text-block">
                    <h4>{{item ? item?.name :'-'}}</h4>
                    <div class="mt-3">
                        <span class="label-custom">Supplier Offer Price : </span>
                        <span class="value-custom">{{item ? item?.dealPrice :'0'}}</span>
                    </div>
                    <div class="mt-3">
                        <span class="label-custom">Total Qty : </span>
                        <span class="value-custom">{{'1MT'}}</span>
                    </div>
                </div>
            </div>

            <div class="col-xl-5 col-lg-5 col-md-5 col-sm-12 ">
                <div>
                    <span class="cName">{{item?.companyName}}</span>&nbsp;
                    <img [ngSrc]="item?.twitterBlueTagUrl" height="20" width="20" class="img-fluid" alt="">
                    <div>
                        <img [ngSrc]="item?.flagUrl" height="20" width="20" class="img-fluid" alt=""><span
                            class="supCountryName">{{item?.suppCountry}}</span>
                    </div>
                </div>
            </div>
        </div>

        <form [formGroup]="formGroup">
            <div class="row mt-3">
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mt-3">
                    <div class="form-group">
                        <label for="" class="form-label">Batch No</label>
                        <input type="text" formControlName="batchNo" class="form-control">
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mt-3">
                    <div class="form-group">
                        <label for="" class="form-label">Price</label>
                        <input type="text" formControlName="price" class="form-control">
                    </div>
                </div>

                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mt-3">
                    <div class="form-group">
                        <label for="" class="form-label">Source Location<span class="text-danger">*</span></label>
                        <input type="text" formControlName="sourceLocation"
                            [class.is-invalid]="controlHasError('required', 'sourceLocation')" class="form-control">
                        <div class="invalid-feedback" *ngIf="controlHasError('required', 'sourceLocation')">
                            This field is required
                        </div>
                    </div>
                </div>

                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mt-3">
                    <div class="form-group">
                        <label for="" class="form-label">Date Of Shippment<span class="text-danger">*</span></label>
                        <input type="date" formControlName="dateOfShipment"
                            [class.is-invalid]="controlHasError('required', 'dateOfShipment')" class="form-control">
                        <div class="invalid-feedback" *ngIf="controlHasError('required', 'dateOfShipment')">
                            This field is required
                        </div>
                    </div>
                </div>

                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mt-3">
                    <div class="form-group">
                        <label for="" class="form-label">Receiving Location<span class="text-danger">*</span></label>
                        <input type="text" formControlName="receivingLocation"
                            [class.is-invalid]="controlHasError('required', 'receivingLocation')" class="form-control">
                        <div class="invalid-feedback" *ngIf="controlHasError('required', 'receivingLocation')">
                            This field is required
                        </div>
                    </div>
                </div>
                <div class="col-12 mt-3 submit-btn">
                    <button class="btn btn-primary add-batch-btn" (click)="addToTable()">
                        <img src="../../../../../assets/plus-icon-svg.svg" alt=""> Add Batch
                    </button>
                    <button (click)="acceptDealSuccess()" class="btn btn-primary accept-deal-before"
                        [class.accept-deal-after]="this.formGroup.valid">
                        <img src="../../../../../assets/double-check.svg" alt=""> Accept Deal
                    </button>
                </div>

                
                <div class="col-12 mt-3">
                    @if(this.batchList.length){
                        <!-- Bordered Tables -->
                        <table class="table table-bordered table-nowrap">
                            <thead>
                                <tr>
                                    <th scope="col">Sr.No</th>
                                    <th scope="col">Batch No</th>
                                    <th scope="col">Date Of Shippment</th>
                                    <th scope="col">Source Location</th>
                                    <th scope="col">Receiving Location</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                @for(item of batchList; track $index){
                                    <tr>
                                        <th scope="row">{{$index+1}}</th>
                                        <td>{{item ? item.batchNo :'-'}}</td>
                                        <td>{{item ? item.dateOfShipment :'-'}}</td>
                                        <td><span class="badge bg-primary-subtle text-primary">{{item ? item.sourceLocation :'-'}}</span></td>
                                        <td><span class="badge bg-primary-subtle text-primary">{{item ? item.receivingLocation :'-'}}</span></td>
                                        <td>
                                            <button (click)="onRemove(item)" class="btn btn-danger btn-sm remove-btn">
                                                Delete
                                                <img  src="../../../../../assets/delete-icon.svg" height="15" alt="">
                                            </button>
                                        </td>
                                    </tr>
                                }
                               
                            </tbody>
                        </table>
                    }
                </div>
            </div>
        </form>
    </div>
</div>
<section class="header">
    <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12">
            <h3 style="color: #39383A; font-weight: 500;">Account Setting | {{this.steps[currentStep -1]}}</h3>
            <p style="font-weight: 400; ">Modify your profile and submit the request for admin approval</p>
        </div>
        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12 text-end">
            <button class="btn text-primary mx-2 btnFeedback" (click)="prevStep()" *ngIf="currentStep >= 1" [disabled]="currentStep <= 1" [class.disabled]="currentStep <= 1"
                style="background-color: white; border-radius: 10px; color: #233B77 !important; border: 1px solid #233B77;">
                <img src="../../../../assets/supplier-dashboard/back-arrow.svg" alt="">
            </button>
            <button class="btn text-light mx-2 btnFeedback" style="background-color: #233B77; border-radius: 10px;" 
            (click)="nextStep()" [disabled]="currentStep == 10"  [class.disabled]="currentStep == 10">
                <img src="../../../../assets/arrow_white.png" alt="">
            </button>
            <!-- <button class="btn text-light mx-2 bg-light" style="border-radius: 10px;">
                <img src="../../../../assets/supplier-dashboard/reset.svg" alt="">
            </button> -->
            <button class="btn text-light mx-2 btnFeedback" style="background-color: #233B77; border-radius: 10px; padding-top: 10px;padding-bottom: 10px;"
            (click)="this.sellerProfileUpdate()">
                Save Changes
            </button>
        </div>
    </div>
</section>

<section class="forms">
          <!-- Supplier Profile -->
    <form class="p-0" [formGroup]="profileFormGroup">
        <div *ngIf="currentStep === 1" class="mt-3"
            style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
            <div class="card p-3" style="border-radius: 15px;">
                <div class="row mt-3">
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Supplier No.
                            <span>*</span></label>
                        <input type="text" class="form-control" numbersOnly formControlName="supplierNo"
                            placeholder="Supplier No." style="height: 40px;"
                            [class.is-invalid]="isControlInvalid('supplierNo',this.profileFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'supplierNo',this.profileFormGroup)">
                            Supplier number is required
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="!controlHasError('required', 'supplierNo',this.profileFormGroup) && controlHasError('whitespace', 'supplierNo',this.profileFormGroup)">
                            Supplier number cannot be empty or spaces only
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Supplier Name
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Supplier Name" style="height: 40px;"
                            formControlName="supplierName"
                            [class.is-invalid]="isControlInvalid('supplierName',this.profileFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'supplierName',this.profileFormGroup)">
                            Supplier Name is required
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="!controlHasError('required', 'supplierName',this.profileFormGroup) && controlHasError('whitespace', 'supplierName',this.profileFormGroup)">
                            Supplier Name cannot be empty or spaces only
                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Main Products
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Main Products" style="height: 40px;"
                            formControlName="mainProducts"
                            [class.is-invalid]="isControlInvalid('mainProducts',this.profileFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'mainProducts',this.profileFormGroup)">
                            MainProducts is required
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="!controlHasError('required', 'mainProducts',this.profileFormGroup) && controlHasError('whitespace', 'mainProducts',this.profileFormGroup)">
                            MainProducts cannot be empty or spaces only
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Company Category
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Company Category" style="height: 40px;"
                            formControlName="companyCategory"
                            [class.is-invalid]="isControlInvalid('companyCategory',this.profileFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'companyCategory',this.profileFormGroup)">
                            Company Category is required
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="!controlHasError('required', 'companyCategory',this.profileFormGroup) && controlHasError('whitespace', 'companyCategory',this.profileFormGroup)">
                            Company Category cannot be empty or spaces only
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Enterprise
                            Classification
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Enterprise Classification"
                            formControlName="enterpriseClassification"
                            [class.is-invalid]="isControlInvalid('enterpriseClassification',this.profileFormGroup)"
                            style="height: 40px;">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'enterpriseClassification',this.profileFormGroup)">
                            Enterprise Classification is required
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="!controlHasError('required', 'enterpriseClassification',this.profileFormGroup) && controlHasError('whitespace', 'enterpriseClassification',this.profileFormGroup)">
                            Enterprise Classification cannot be empty or spaces only
                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Select Product Category
                            <span>*</span></label>
                        <select class="form-select" aria-label="Default select example"
                            formControlName="productsCategory"
                            [class.is-invalid]="isControlInvalid('productsCategory',this.profileFormGroup)">
                            <option value="" selected>Select Category</option>
                            @for(data of categoryList; track data;){
                                <option  [value]="data?.id">{{data?.name}}</option>
                            }
                            <!-- <option selected>Processed Food</option>
                            <option value="1">Dairy & Eggs</option>
                            <option value="2">Meat & Poultry</option>
                            <option value="3">Fruits & Vegetables</option>
                            <option value="3">Fish</option> -->
                        </select>
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'productsCategory',this.profileFormGroup)">
                            Products Category is required
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Address Line 1
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Address Line 1" style="height: 40px;"
                            formControlName="addressLine1"
                            [class.is-invalid]="isControlInvalid('addressLine1',this.profileFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'addressLine1',this.profileFormGroup)">
                            AddressLine 1 is required
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="!controlHasError('required', 'addressLine1',this.profileFormGroup) && controlHasError('whitespace', 'addressLine1',this.profileFormGroup)">
                            AddressLine 1 cannot be empty or spaces only
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Address Line 2
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Address Line 2" style="height: 40px;"
                            formControlName="addressLine2"
                            [class.is-invalid]="isControlInvalid('addressLine2',this.profileFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'addressLine2',this.profileFormGroup)">
                            AddressLine 2 is required
                        </div>
                        <div class="invalid-feedback"
                            *ngIf="!controlHasError('required', 'addressLine2',this.profileFormGroup) && controlHasError('whitespace', 'addressLine2',this.profileFormGroup)">
                            AddressLine 2 cannot be empty or spaces only
                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <div class="row">
                            <label style="font-size: 14px; color: #4F585E;">Traceable <span>*</span></label>
                            <div class="d-flex align-items-center mt-2">
                                <input class="form-check-input" type="radio" name="traceable" id="inlineRadio1"
                                    [value]="true" style="margin-right: 10px;" formControlName="traceable">
                                <label class="form-check-label" for="inlineRadio1"
                                    style="color: #060C43; font-size: 16px;">Yes</label>
                                <input class="form-check-input ms-3" type="radio" name="traceable" id="inlineRadio2"
                                    [value]="false" style="margin-left: 10px;" formControlName="traceable">
                                <label class="form-check-label ms-2" for="inlineRadio2"
                                    style="color: #060C43; font-size: 16px;">No</label>
                            </div>
                            <div class="invalid-feedback"
                                *ngIf="controlHasError('required', 'traceable',this.profileFormGroup)">
                                Traceable is required
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <div class="row">
                            <label style="font-size: 14px; color: #4F585E;">Export <span>*</span></label>
                            <div class="d-flex align-items-center mt-2">
                                <input class="form-check-input" type="radio" name="export" id="inlineRadio3"
                                    [value]="true" style="margin-right: 10px;" formControlName="export">
                                <label class="form-check-label" for="inlineRadio3"
                                    style="color: #060C43; font-size: 16px;">Yes</label>
                                <input class="form-check-input ms-3" type="radio" name="export" id="inlineRadio4"
                                    [value]="false" style="margin-left: 10px;" formControlName="export">
                                <label class="form-check-label ms-2" for="inlineRadio4"
                                    style="color: #060C43; font-size: 16px;">No</label>
                            </div>
                            <div class="invalid-feedback"
                                *ngIf="controlHasError('required', 'export',this.profileFormGroup)">
                                Export is required
                            </div>

                        </div>
                    </div>
                    <div class="col-12 col-sm-6 col-md-4 mb-3">
                        <div class="row">
                            <label style="font-size: 14px; color: #4F585E;">ISO9001 <span>*</span></label>
                            <div class="d-flex align-items-center mt-2">
                                <input class="form-check-input" type="radio" name="iso9001" id="inlineRadio5"
                                    [value]="true" checked style="margin-right: 10px;" formControlName="iso9001">
                                <label class="form-check-label" for="inlineRadio5"
                                    style="color: #060C43; font-size: 16px;">Yes</label>
                                <input class="form-check-input ms-3" type="radio" name="iso9001" id="inlineRadio6"
                                    [value]="false" style="margin-left: 10px;" formControlName="iso9001">
                                <label class="form-check-label ms-2" for="inlineRadio6"
                                    style="color: #060C43; font-size: 16px;">No</label>
                            </div>
                            <div class="invalid-feedback"
                                *ngIf="controlHasError('required', 'iso9001',this.profileFormGroup)">
                                iso9001 is required
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <div class="row">
                            <label style="font-size: 14px; color: #4F585E;">Global Gap
                                <span>*</span></label>
                            <div class="d-flex align-items-center mt-2 cursor-pointer">
                                <input class="form-check-input" type="radio" name="globalGap" id="inlineRadio7"
                                    [value]="true" style="margin-right: 10px;" formControlName="globalGap">
                                <label class="form-check-label" for="inlineRadio7"
                                    style="color: #060C43; font-size: 16px;">Yes</label>
                                <input class="form-check-input ms-3" type="radio" name="globalGap" id="inlineRadio8"
                                    [value]="false" style="margin-left: 10px;" formControlName="globalGap">
                                <label class="form-check-label ms-2" for="inlineRadio8"
                                    style="color: #060C43; font-size: 16px;">No</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- Certificates -->
    <div *ngIf="currentStep === 2" class="mt-3"
        style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
        <div class="card p-3" style="border-radius: 15px;">
            <form class="p-0" [formGroup]="certificatesFormGroup">
                <div class="row mt-3">
                    <div class="col-md-4 col-sm-12">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Select License Type
                            <span>*</span></label>
                        <ng-select class="w-100" [items]="licenseTypes" bindLabel="value" bindValue="value"
                            formControlName="licenseType" [clearable]="false" placeholder="Select License Type"
                            [class.is-invalid]="isControlInvalid('licenseType',this.certificatesFormGroup)"></ng-select>
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'licenseType',this.certificatesFormGroup)">
                            Licence type is required
                        </div>
                    </div>

                    <div class="col-md-4 col-sm-12 mt-3 mt-md-0">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">License Issuing Authority
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Issuing Authority"
                            formControlName="issuingAuthority"
                            [class.is-invalid]="isControlInvalid('issuingAuthority',this.certificatesFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'issuingAuthority',this.certificatesFormGroup)">
                            Issuing Authority is required
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12 mt-3 mt-md-0">
                        <label style="font-size: 14px; color: #4F585E;" for="supplier">Supplier Name
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Supplier Name"
                            formControlName="supplierName"
                            [class.is-invalid]="isControlInvalid('supplierName',this.certificatesFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required','supplierName',this.certificatesFormGroup)">
                            Supplier Name is required
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-4 col-sm-12">
                        <div class="form-group">
                            <label style="font-size: 14px; color: #4F585E;">Effective Date<span>*</span></label>
                            <div class="input-group clockpicker">
                                <input ngbDatepicker class="form-control" placeholder="dd-MM-yyyy"
                                    formControlName="effectiveDate" readonly
                                    [class.is-invalid]="isControlInvalid('effectiveDate',this.certificatesFormGroup)"
                                    #dto="ngbDatepicker" />
                                <div class="input-group-append" (click)="dto.toggle()">
                                    <span class="input-group-text bg-light">
                                        <img src="./../../../assets/date.png" width="24px" height="24px" alt="">
                                    </span>
                                </div>
                                <div class="invalid-feedback"
                                    *ngIf="controlHasError('required','effectiveDate',this.certificatesFormGroup)">
                                    Effective date is required
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12 mt-3 mt-md-0">
                        <div class="form-group">
                            <label style="font-size: 14px; color: #4F585E;">Expiration Date<span>*</span></label>
                            <div class="input-group clockpicker">
                                <input ngbDatepicker class="form-control" placeholder="dd-MM-yyyy"
                                    formControlName="expirationDate" readonly
                                    [class.is-invalid]="isControlInvalid('expirationDate',this.certificatesFormGroup)"
                                    #dto2="ngbDatepicker" />
                                <div class="input-group-append" (click)="dto2.toggle()">
                                    <span class="input-group-text bg-light">
                                        <img src="./../../../assets/date.png" width="24px" height="24px" alt="">
                                    </span>
                                </div>
                                <div class="invalid-feedback"
                                    *ngIf="controlHasError('required','expirationDate',this.certificatesFormGroup)">
                                    Expiration date is required
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-12 mt-3 mt-md-0 ">
                        <div class="form-group mx-auto">
                            <label style="font-size: 14px; color: #4F585E;">Upload Certificate Image/pdf
                                <span>*</span></label>
                            <div class="row">
                                <div class="col-6 col-md-4">
                                    <input type="file" class="form-control" id="certificate" name="certificate"
                                    accept="image/*,application/pdf" (change)="onFileSelected($event)"
                                        style="width: 100px; height: 40px; border-radius: 10px;">
                                </div>
                                <!-- <div class="col-6 col-md-4 mt-md-0">
                                    <button class="btn w-10 h-auto"
                                        style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                                </div> -->
                                <div class="col-6 col-md-4 mt-2">
                                    <p style="font-weight: 500; color: #4F585E;"><b>{{ selectedFile?.name }}</b></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <button class="btn w-10 h-auto"
                            style="background-color: #233B77; font-size: 14px; border-radius: 10px; color: white;"
                            (click)="addCertificateStep_2()">
                             {{this.isEditModeCerti ? 'Update Certificate' : 'Add Certificate'}} <img src="./../../../assets/plus.png" style="width: 20px; height: 20px;"
                                alt="">
                        </button>
                    </div>
                </div>
            </form>
            <div class="row mt-3">
                <div class="col-12">
                    <h4 class="mt-4" style="color: #3C4150;">All Added Licence</h4>
                    <div class="table-responsive">
                        <table class="table mt-3">
                            <thead class="table-light">
                                <tr style="color: #4F585E; font-size: 14px;">
                                    <th scope="col">Licence Type</th>
                                    <th scope="col">Licence Issuing Authority</th>
                                    <th scope="col">Supplier Name</th>
                                    <th scope="col">Effective Date</th>
                                    <th scope="col">Expiration Date</th>
                                    <th scope="col">File</th>
                                    <th scope="col" style="width: 17%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let certificate of certificatesData; let i = index;"
                                    style="color: #4F585E; font-size: 14px;">
                                    <td>{{ certificate.licenseType }}</td>
                                    <td>{{ certificate.issuingAuthority }}</td>
                                    <td>{{ certificate.supplierName }}</td>
                                    <td>{{ certificate.effectiveDate }}</td>
                                    <td>{{ certificate.expirationDate }}</td>
                                    <td>
                                        @if(certificate.certificateImage!==null){
                                            @if( checkFileType(certificate.certificateImage)){
                                                <img src="../../../assets/pdf.png" alt="uploadFile" width="50">
                                            }@else {
                                                <img [src]="certificate.certificateImage" alt="uploadFile" width="50">
                                            }
                                        }@else{
                                            <i class="ri-file-image-line fs-18"></i>
                                        }
                                    </td>
                                    <td style="width: 17%; text-align: center;">
                                        <button type="button" class="btn btn-primary btn-sm" (click)="editCerti(i)">
                                            <img src="../../assets/Frame (2).png"  class="img-fluid" alt=""> Edit
                                        </button>
                                        <button type="button" class="btn btn-danger btn-sm mx-2"
                                            (click)="deleteCerti(i)">
                                            <img src="../../assets/Frame (3).png" class="img-fluid" alt=""> Delete
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Factory -->
    <div *ngIf="currentStep === 3" class="mt-3"
        style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
        <div class="card p-3" style="border-radius: 15px;">
            <form class="p-0" [formGroup]="factoryFormGroup">
                <div class="row mt-3">
                    <div class="col-12 col-md-6 col-lg-4">
                        <label class="d-block" style="font-size: 14px; color: #4F585E;">Factory Name
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Factory Name" style="height: 40px;"
                            formControlName="name" [class.is-invalid]="isControlInvalid('name',this.factoryFormGroup)">
                        <div class="invalid-feedback" *ngIf="controlHasError('required', 'name',this.factoryFormGroup)">
                            Factory name is required
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4 mt-3 mt-md-0">
                        <label class="d-block" style="font-size: 14px; color: #4F585E;">Contact No.
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Contact No." style="height: 40px;"
                            formControlName="contactNo"
                            [class.is-invalid]="isControlInvalid('contactNo',this.factoryFormGroup)" numbersOnly>
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'contactNo',this.factoryFormGroup)">
                            Contact no is required
                        </div>
                    </div>
                    <div class="col-12 col-lg-4 mt-3 mt-lg-0">
                        <label class="d-block" style="font-size: 14px; color: #4F585E;">Address Line 1
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Address Line 1" style="height: 40px;"
                            formControlName="addressLine1"
                            [class.is-invalid]="isControlInvalid('addressLine1',this.factoryFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'addressLine1',this.factoryFormGroup)">
                            AddressLine 1 is required
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-md-4 mb-3">
                        <label class="d-block" style="font-size: 14px; color: #4F585E;">Address Line 2
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Address Line 2" style="height: 40px;"
                            formControlName="addressLine2"
                            [class.is-invalid]="isControlInvalid('addressLine2',this.factoryFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'addressLine2',this.factoryFormGroup)">
                            AddressLine 2 is required
                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Staff Qty
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Staff" style="width: 100%; height: 40px;"
                            value="25" formControlName="staffQuantity"
                            [class.is-invalid]="isControlInvalid('staffQuantity',this.factoryFormGroup)" numbersOnly>
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'staffQuantity',this.factoryFormGroup)">
                            Staff Quantity is required
                        </div>
                    </div>
                    <div class="col-4 d-none d-md-block">

                    </div>
                    <div class="col-4 d-none d-md-block">

                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <button class="btn text-center w-10 w-md-auto"
                            style="background-color: #233B77;height: 45px; font-size: 14px; border-radius: 10px; color: white;"
                            (click)="addFactoryInfo()">
                            Add Factory Info <img src="./../../../assets/plus.png" style="width: 20px; height: 20px;"
                                alt="">
                        </button>
                    </div>
                </div>
            </form>
            <div class="row mt-3">
                <div class="col-12">
                    <h4 class="mt-4" style="color: #3C4150;">Factory Info</h4>
                    <div class="table-responsive">
                        <table class="table mt-3">
                            <thead class="table-light">
                                <tr style="color: #4F585E; font-size: 14px;">
                                    <th scope="col">Factory Name</th>
                                    <th scope="col">Contact no</th>
                                    <th scope="col">Address</th>
                                    <th scope="col">Staff</th>
                                    <th scope="col" style="width: 17%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let factory of factoryData; let i = index;"
                                    style="color: #4F585E; font-size: 14px;">
                                    <!-- name: [this.factoryClass.name, Validators.compose([Validators.required,this.noWhitespaceValidator()])],
                                    contactNo: [this.factoryClass.contactNo, Validators.compose([Validators.required])],
                                    addressLine1: [this.factoryClass.addressLine1, Validators.compose([Validators.required, this.noWhitespaceValidator()])],
                                    addressLine2: [this.factoryClass.addressLine2, Validators.compose([Validators.required,this.noWhitespaceValidator()])],
                                    staffQuantity: [this.factoryClass.staffQuantity, Validators.compose([Validators.required])], -->
                                    <td>{{ factory.name }}</td>
                                    <td>{{ factory.contactNo }}</td>
                                    <td>{{ factory.addressLine1 }}, {{ factory.addressLine2 }}</td>
                                    <td>{{ factory.staffQuantity }}</td>
                                    <td style="width: 17%; text-align: center;">
                                        <button type="button" class="btn btn-primary btn-sm">
                                            <img src="../../assets/Frame (2).png" class="img-fluid" alt=""> Edit
                                        </button>
                                        <button type="button" class="btn btn-danger btn-sm mx-2"
                                            (click)="deleteFactory(i)">
                                            <img src="../../assets/Frame (3).png" class="img-fluid" alt=""> Delete
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Logistics -->
    <form class="p-0" [formGroup]="logisticsFormGroup">
        <div *ngIf="currentStep === 4" class="mt-3"
            style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
            <div class="card p-3" style="border-radius: 15px;">
                <div class="row mt-3">
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Name
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Name" style="width: 100%; height: 40px;"
                            formControlName="name"
                            [class.is-invalid]="isControlInvalid('name',this.logisticsFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'name',this.logisticsFormGroup)">
                            Name is required
                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Tool
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Tool" style="width: 100%; height: 40px;"
                            formControlName="tool"
                            [class.is-invalid]="isControlInvalid('tool',this.logisticsFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'tool',this.logisticsFormGroup)">
                            Tool is required
                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Logistics Routine
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Logistics Routine"
                            style="width: 100%; height: 40px;" formControlName="logisticsRoutine"
                            [class.is-invalid]="isControlInvalid('logisticsRoutine',this.logisticsFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'logisticsRoutine',this.logisticsFormGroup)">
                            Logistics Routine is required
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12 col-md-4">
                        <label style="font-size: 14px; color: #4F585E;">Temperature
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Temperature"
                            style="width: 100%; height: 40px;" formControlName="temperature"
                            [class.is-invalid]="isControlInvalid('temperature',this.logisticsFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'temperature',this.logisticsFormGroup)">
                            Temperature is required
                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">

                    </div>
                    <div class="col-12 col-md-4 mb-3">

                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- Test Report -->
    <form class="p-0" [formGroup]="testReportFormGroup">
        <div *ngIf="currentStep === 5" class="mt-3"
            style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
            <div class="card p-3" style="border-radius: 15px;">
                <div class="row mt-3">
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Name
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Name" style="width: 100%; height: 40px;"
                            formControlName="name"
                            [class.is-invalid]="isControlInvalid('name',this.testReportFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'name',this.testReportFormGroup)">
                            Name is required
                        </div>
                    </div>

                    <div class="col-12 col-md-4 mb-3">
                        <div class="form-group">
                            <label style="font-size: 14px; color: #4F585E;">Effective Date<span>*</span></label>
                            <div class="input-group clockpicker">
                                <input ngbDatepicker class="form-control" placeholder="dd-MM-yyyy" #dto="ngbDatepicker"
                                    formControlName="effectiveDate" readonly
                                    [class.is-invalid]="isControlInvalid('effectiveDate',this.testReportFormGroup)" />
                                <div class="input-group-append" (click)="dto.toggle()">
                                    <span class="input-group-text bg-light">
                                        <img src="./../../../assets/date.png" width="24px" height="24px" alt="">
                                    </span>
                                </div>
                            </div>
                            <div class="invalid-feedback"
                                *ngIf="controlHasError('required', 'effectiveDate',this.testReportFormGroup)">
                                Effective date is required
                            </div>

                        </div>
                    </div>
                    <div class="col-12 col-md-4 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Validity Period
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Validity Period"
                            style="width: 100%; height: 40px;" formControlName="validityPeriod"
                            [class.is-invalid]="isControlInvalid('validityPeriod',this.testReportFormGroup)">
                        <div class="invalid-feedback"
                            *ngIf="controlHasError('required', 'validityPeriod',this.testReportFormGroup)">
                            Validity Period is required
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12 col-md-4 mb-3">
                        <div class="form-group">
                            <label style="font-size: 14px; color: #4F585E;">Upload test report <span>*</span></label>
                            <div class="row">
                                <div class="col-6 col-md-4">
                                    <input type="file" class="form-control" id="testReport" name="testReport"
                                        accept="image/*,application/pdf" multiple
                                        (change)="onTestReportFileSelect($event)"
                                        style="width: 100px; height: 40px; border-radius: 10px;">
                                </div>
                                <!-- <div class="col-6 col-md-4 mt-md-0">
                                    <button class="btn w-10 h-auto"
                                        style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                                </div> -->
                                <div class="col-6 col-md-4 mt-2">
                                    <p style="font-weight: 500; color: #4F585E;"><b>{{ testReportSelectedFile?.name
                                            }}</b></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">

                    </div>
                    <div class="col-12 col-md-4">

                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <button class="btn w-10 text-center"
                            style="background-color: #233B77; height: 45px; font-size: 14px; border-radius: 10px; color: white;"
                            (click)="addTestReport()">
                            Add Report <img src="./../../../assets/plus.png" style="width: 20px; height: 20px;" alt="">
                        </button>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-12">
                        <h4 class="mt-4" style="color: #3C4150;">Test Report</h4>
                        <div class="table-responsive">
                            <table class="table mt-3">
                                <thead class="table-light">
                                    <tr style="color: #4F585E; font-size: 14px;">
                                        <th scope="col">Name</th>
                                        <th scope="col">Effective Date</th>
                                        <th scope="col">Validity Period</th>
                                        <th scope="col">Test Reports</th>
                                        <th scope="col" style="width: 17%;">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let testReport of testReportData; let i = index;"
                                        style="color: #4F585E; font-size: 14px;">
                                        <td>{{ testReport.name }}</td>
                                        <td>{{ testReport.effectiveDate }}</td>
                                        <td>{{ testReport.validityPeriod }}</td>
                                        <td>
                                            @if(testReport?.uploadFile!==null){
                                                @if( checkFileType(testReport?.uploadFile)){
                                                    <img src="../../../assets/pdf.png" alt="uploadFile" width="50">
                                                }@else {
                                                    <img [src]="testReport?.uploadFile" alt="uploadFile" width="50">
                                                }
                                            }@else{
                                                <i class="ri-file-image-line fs-18"></i>
                                            }
                                        </td>
                                        <td style="width: 17%; text-align: center;">
                                            <button type="button" class="btn btn-primary btn-sm">
                                                <img src="../../assets/Frame (2).png" class="img-fluid" alt=""> Edit
                                            </button>
                                            <button type="button" class="btn btn-danger btn-sm mx-2"
                                                (click)="deleteTestReportFile(i)">
                                                <img src="../../assets/Frame (3).png" class="img-fluid" alt=""> Delete
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- Farm -->
    <form class="p-0" [formGroup]="farmFormGroup">
    <div *ngIf="currentStep === 6" class="mt-3"
        style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
        <div class="card p-3" style="border-radius: 15px;">
            <div class="row mt-3">
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Farm Name
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Name" style="width: 100%; height: 40px;"
                        value="Green Valley Farms"  formControlName="name"
                        [class.is-invalid]="isControlInvalid('name',this.farmFormGroup)">
                    <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'name',this.farmFormGroup)">
                        Name is required
                    </div>
                </div>
               
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Representative
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Reresentative"
                        style="width: 100%; height: 40px;" value="Emma Jason" formControlName="representative"
                        [class.is-invalid]="isControlInvalid('representative',this.farmFormGroup)">
                    <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'representative',this.farmFormGroup)">
                        Representative is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Category
                        <span>*</span></label>
                    <select class="form-select" aria-label="Default select example"  formControlName="category" [class.is-invalid]="isControlInvalid('category',this.farmFormGroup)">
                        <option value="" selected>Select Category</option>
                        @for(data of categoryList; track data;){
                            <option  [value]="data?.id">{{data?.name}}</option>
                        }
                        <!-- <option selected>Processed Food</option>
                            <option value="1">Dairy & Eggs</option>
                            <option value="2">Meat & Poultry</option>
                            <option value="3">Fruits & Vegetables</option>
                            <option value="3">Fish</option> -->
                    </select>
                    <div class="invalid-feedback"
                    *ngIf="controlHasError('required', 'category',this.farmFormGroup)">
                    Category is required
                </div>

                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Code
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Code" style="width: 100%; height: 40px;"
                        value="GVF2024" formControlName="code"
                        [class.is-invalid]="isControlInvalid('code',this.farmFormGroup)">
                    <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'code',this.farmFormGroup)">
                        Code is required
                    </div>
                </div>
              
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Farm Area
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Farm area" style="width: 100%; height: 40px;"
                        value="150 Acres" formControlName="area"
                        [class.is-invalid]="isControlInvalid('area',this.farmFormGroup)">
                    <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'area',this.farmFormGroup)">
                        Area is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Farm Address
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Farm address"
                        style="width: 100%; height: 40px;" value="Chinnging Zimnadhge - Shangai Metro" formControlName="address"
                        [class.is-invalid]="isControlInvalid('address',this.farmFormGroup)">
                    <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'address',this.farmFormGroup)">
                        Address is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Unit Output
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Unit output" style="width: 100%; height: 40px;"
                        value="50k lbs PS" formControlName="unitOutput"
                        [class.is-invalid]="isControlInvalid('unitOutput',this.farmFormGroup)">
                    <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'unitOutput',this.farmFormGroup)">
                        Unit Output is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Staff Qty
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Staff" style="width: 100%; height: 40px;"
                        value="25"formControlName="staffQty" numbersOnly
                        [class.is-invalid]="isControlInvalid('staffQty',this.farmFormGroup)">
                    <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'staffQty',this.farmFormGroup)">
                        StaffQty is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <div class="form-group">
                        <label style="font-size: 14px; color: #4F585E;">Upload Test Report<span></span> </label>
                        <div class="row">
                            <div class="col-6 col-md-4">
                                <input type="file" class="form-control" id="productImage" name="productImage"
                                    placeholder="Choose File" (change)="onFarmFileSelect($event)"
                                    style="width: 100px; height: 40px; border-radius: 10px;">
                            </div>
                            <div class="col-6 col-md-4 mt-md-0">
                                <button class="btn w-10 h-auto"
                                    style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                            </div>
                            <div class="col-6 col-md-4 mt-2">
                                <p style="font-weight: 500; color: #4F585E;"><b>{{ farmSelectedFile?.name }}</b></p>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <button class="btn w-10 text-center"  (click)="addFarm()"
                        style="background-color: #233B77; height: 45px; font-size: 14px; border-radius: 10px; color: white;">
                        Add Farm <img src="./../../../assets/plus.png" style="width: 20px; height: 20px;" alt="">
                    </button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <h4 class="mt-4" style="color: #3C4150;">Test Report</h4>
                    <div class="table-responsive">
                        <table class="table mt-3">
                            <thead class="table-light">
                                <tr style="color: #4F585E; font-size: 14px;">
                                    <th scope="col">Name</th>
                                    <th scope="col">Location</th>
                                    <th scope="col">Representative </th>
                                    <th scope="col">Category</th>
                                    <th scope="col">Staff</th>
                                    <th scope="col">Farm Pictures</th>
                                    <th scope="col" style="width: 17%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let farm of farmData; let i = index;"
                                    style="color: #4F585E; font-size: 14px;">
                                    <td>{{ farm.name }}</td>
                                    <td>{{ farm.address.length > 28 ? (farm.address|slice:0:28)+'...'  : farm.address }}</td>
                                    <td>{{ farm.representative }}</td>
                                    <!-- <td>{{ farm.category }}</td> -->
                                    <td>{{ getName(farm.category) }}</td>
                                    <td>{{ farm.staffQty }}</td>
                                    <!-- <td>{{ farm.code }}</td>
                                    <td>{{ farm.area }}</td>
                                    <td>{{ farm.unitOutput }}</td> -->
                                    <td>
                                        @if(farm?.testReport!==null){
                                            @if( checkFileType(farm?.testReport)){
                                                <img src="../../../assets/pdf.png" alt="uploadFile" width="50">
                                            }@else {
                                                <img [src]="farm?.testReport" alt="uploadFile" width="50">
                                            }
                                        }@else{
                                            <i class="ri-file-image-line fs-18"></i>
                                        }
                                    </td>
                                    <td style="width: 17%; text-align: center;">
                                        <button type="button" class="btn btn-primary btn-sm">
                                            <img src="../../assets/Frame (2).png" class="img-fluid" alt=""> Edit
                                        </button>
                                        <button type="button" class="btn btn-danger btn-sm mx-2"
                                            (click)="deleteFarmFile(i)">
                                            <img src="../../assets/Frame (3).png" class="img-fluid" alt=""> Delete
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </form>

    <!-- Product -->
    <form class="p-0" [formGroup]="productFormGroup">
    <div *ngIf="currentStep === 7" class="mt-3"
        style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
        <div class="card p-3" style="border-radius: 15px;">
            <div class="row mt-3">
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Product
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Product" value="Salted Duck"
                        style="width: 100%; height: 40px;" formControlName="name"
                        [class.is-invalid]="isControlInvalid('name',this.productFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'name',this.productFormGroup)">
                        Name is required
                    </div>
                </div>
              
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Select Product Category
                        <span>*</span></label>
                    <select class="form-select" aria-label="Default select example" formControlName="categoryId"
                    [class.is-invalid]="isControlInvalid('categoryId',this.productFormGroup)">
                    <option value="" selected>Select Category</option>
                    @for(data of categoryList; track data;){
                        <option  [value]="data?.id">{{data?.name}}</option>
                    }
                        <!-- <option selected value="Processed Food">Processed Food</option>
                        <option value="Dairy & Eggs">Dairy & Eggs</option>
                        <option value="Meat & Poultry">Meat & Poultry</option>
                        <option value="Fruits & Vegetables">Fruits & Vegetables</option>
                        <option value="Fish">Fish</option> -->
                    </select>
                    <div class="invalid-feedback"
                    *ngIf="controlHasError('required', 'categoryId',this.productFormGroup)">
                    Category is required
                </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Manufacture Info
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Xinjiang ** Fruit Co.,Ltd."
                        value="Xinjiang ** Fruit Co.,Ltd." style="width: 100%; height: 40px;" formControlName="manufactureInfo"
                        [class.is-invalid]="isControlInvalid('manufactureInfo',this.productFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'manufactureInfo',this.productFormGroup)">
                        Manufacture Info is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <div class="row">
                        <div class="col-md-6">
                            <label style="font-size: 14px; color: #4F585E;">Min Price
                                <span>*</span></label>
                            <input type="text" class="form-control" placeholder="" value="RMB 5.0 per KG"
                                style="width: 100%; height: 40px;"formControlName="minPrice"
                                [class.is-invalid]="isControlInvalid('minPrice',this.productFormGroup)">
                                <div class="invalid-feedback"
                                *ngIf="controlHasError('required', 'minPrice',this.productFormGroup)">
                                MinPrice is required
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label style="font-size: 14px; color: #4F585E;">Max Price
                                <span>*</span></label>
                            <input type="text" class="form-control" placeholder="" value="RMB 25.9 per KG"
                                style="width: 100%; height: 40px;"formControlName="maxPrice"
                                [class.is-invalid]="isControlInvalid('maxPrice',this.productFormGroup)">
                                <div class="invalid-feedback"
                                *ngIf="controlHasError('required', 'maxPrice',this.productFormGroup)">
                                MaxPrice is required
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Minimum Wholesale Quantity
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="1KG" value="1KG"
                        style="width: 100%; height: 40px;"formControlName="qty"
                        [class.is-invalid]="isControlInvalid('qty',this.productFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'qty',this.productFormGroup)">
                        Quantity is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Origin
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Xinjiang" value="Xinjiang"
                        style="width: 100%; height: 40px;"formControlName="origin"
                        [class.is-invalid]="isControlInvalid('origin',this.productFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'origin',this.productFormGroup)">
                        Origin is required
                    </div>
                </div>
                 
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Logistics
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Room Temp." value="Room Temp."
                        style="width: 100%; height: 40px;" formControlName="logistics"
                        [class.is-invalid]="isControlInvalid('logistics',this.productFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'logistics',this.productFormGroup)">
                        Logistics is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Specification/Packing
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Box" value="Box"
                        style="width: 100%; height: 40px;" formControlName="packing"
                        [class.is-invalid]="isControlInvalid('packing',this.productFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'packing',this.productFormGroup)">
                        Packing is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Variety
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Red Fuji" value="Red Fuji"
                        style="width: 100%; height: 40px;"formControlName="variety"
                        [class.is-invalid]="isControlInvalid('variety',this.productFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'variety',this.productFormGroup)">
                        Variety is required
                    </div>
                </div>

                <div class="col-12 col-md-4 mb-3">
                    <div class="form-group">
                        <label style="font-size: 14px; color: #4F585E;">Test Reports <span>*</span></label>
                        <div class="row">
                            <div class="col-6 col-md-4">
                                <input type="file" class="form-control" id="productImage" name="productImage"
                                    placeholder="Choose File" (change)="onProductTestReportFileSelected($event)"
                                    style="width: 100px; height: 40px; border-radius: 10px;">
                            </div>
                            <div class="col-6 col-md-4 mt-md-0">
                                <button class="btn w-10 h-auto"
                                    style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                            </div>
                            <div class="col-6 col-md-4 mt-2">
                                <p style="font-weight: 500; color: #4F585E;"><b>{{ productTestReportSelectedFile?.name }}</b></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-4 mb-3">
                    <div class="form-group">
                        <label style="font-size: 14px; color: #4F585E;">Certificate <span>*</span></label>
                        <div class="row">
                            <div class="col-6 col-md-4">
                                <input type="file" class="form-control" id="productImage" name="productImage"
                                    placeholder="Choose File" (change)="onProductCertiFileSelected($event)"
                                    style="width: 100px; height: 40px; border-radius: 10px;">
                            </div>
                            <div class="col-6 col-md-4 mt-md-0">
                                <button class="btn w-10 h-auto"
                                    style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                            </div>
                            <div class="col-6 col-md-4 mt-2">
                                <p style="font-weight: 500; color: #4F585E;"><b>{{ productCertiSelectedFile?.name }}</b></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <div class="form-group">
                                <label style="font-size: 14px; color: #4F585E;">Product Picture<span>*</span> <span
                                    style="opacity: 0.7;">(For Img Min size - 1MB)</span> </label>
                        <div class="row">
                            <div class="col-6 col-md-4">
                                <input type="file" class="form-control" id="productImage" name="productImage"
                                    placeholder="Choose File"  accept="image/*" (change)="onProductImgFileSelected($event)"
                                    style="width: 100px; height: 40px; border-radius: 10px;">
                            </div>
                            <div class="col-6 col-md-4 mt-md-0">
                                <button class="btn w-10 h-auto"
                                    style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                            </div>
                            <div class="col-6 col-md-4 mt-2">
                                <p style="font-weight: 500; color: #4F585E;"><b>{{ productImgSelectedFile?.name }}</b></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-12 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Product Description
                        <span>*</span></label>
                    <textarea name="" id="" placeholder="Product Description" rows="4" class="form-control" formControlName="description"
                    [class.is-invalid]="isControlInvalid('description',this.productFormGroup)"></textarea>
                    <div class="invalid-feedback"
                    *ngIf="controlHasError('required', 'description',this.productFormGroup)">
                    Description is required
                </div>

                </div>
                <div class="col-12 col-md-4 mb-3">

                </div>
            </div>

            <div class="col-4 d-none d-md-block">

            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <button class="btn text-center" (click)="addProduct()"
                        style="background-color: #233B77;width: 100%; max-width: 144px; height: 45px; font-size: 14px; border-radius: 10px; color: white;">
                        Add Product <img src="./../../../assets/plus.png" style="width: 20px; height: 20px;" alt="">
                    </button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <h4 class="mt-4" style="color: #3C4150;">Products</h4>
                    <div class="table-responsive">
                        <table class="table mt-3">
                            <thead class="table-light">
                                <tr style="color: #4F585E; font-size: 14px;">
                                    <th scope="col">Product</th>
                                    <th scope="col">Category</th>
                                    <th scope="col">Price Range</th>
                                    <th scope="col">Origin Info</th>
                                    <th scope="col">Product Image</th>
                                    <th scope="col" style="width: 17%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let product of productData; let i = index;"
                                    style="color: #4F585E; font-size: 14px;">
                                    <td>{{ product.name }}</td>
                                    <td>{{ getName(product.categoryId) }}</td>
                                    <td>{{ product.minPrice }}-{{ product.maxPrice }}</td>
                                    <td>{{ product.origin }}</td>
                                    <td>
                                        @if(product?.productImage!==null){
                                            @if( checkFileType(product?.productImage)){
                                                <img src="../../../assets/pdf.png" alt="uploadFile" width="50">
                                            }@else {
                                                <img [src]="product?.productImage" alt="uploadFile" width="50">
                                            }
                                        }@else{
                                            <i class="ri-file-image-line fs-18"></i>
                                        }
                                    </td>
                                    <td style="width: 17%; text-align: center;">
                                        <button type="button" class="btn btn-primary btn-sm">
                                            <img src="../../assets/Frame (2).png" class="img-fluid" alt=""> Edit
                                        </button>
                                        <button type="button" class="btn btn-danger btn-sm mx-2"
                                            (click)="deleteProduct(i)">
                                            <img src="../../assets/Frame (3).png" class="img-fluid" alt=""> Delete
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </form>

    <!-- Assessment Report -->
    <form class="p-0" [formGroup]="assessReportFormGroup">
    <div *ngIf="currentStep === 8" class="mt-3"
        style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
        <div class="card p-3" style="border-radius: 15px;">
            <div class="row mt-3">
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Assessment Type
                        <span>*</span></label>
                    <select class="form-select" aria-label="Default select example" formControlName="assessmentType"
                    [class.is-invalid]="isControlInvalid('assessmentType',this.assessReportFormGroup)">
                        <option selected value="">Select Type</option>
                        <option value="Transparent">Transparent </option>
                    </select>
                    <div class="invalid-feedback"
                    *ngIf="controlHasError('required', 'assessmentType',this.assessReportFormGroup)">
                    AssessmentType is required
                </div>
                </div>
                <div class="col-12 col-md-8 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Name
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Name" style="width: 100%; height: 40px;"
                        value="Food industrial zone, newly librated area, gaojia townFenfugu colony, chongging city. (Food industry zone)"formControlName="name" [class.is-invalid]="isControlInvalid('name',this.assessReportFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required','name',this.assessReportFormGroup)">
                        Name is required
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Standard
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Standard" value="TSR Certificate"
                        style="width: 100%; height: 40px;" formControlName="standard" [class.is-invalid]="isControlInvalid('standard',this.assessReportFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'standard',this.assessReportFormGroup)">
                        Standard is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Objective
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Objective"
                        value="Farm Base Xcdtry Shangunbe Farm Base" style="width: 100%; height: 40px;" formControlName="objective" [class.is-invalid]="isControlInvalid('objective',this.assessReportFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'objective',this.assessReportFormGroup)">
                        Objective is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <div class="form-group">
                        <label style="font-size: 14px; color: #4F585E;">Start Date<span>*</span></label>
                        <div class="input-group clockpicker">
                            <input ngbDatepicker class="form-control" placeholder="dd-MM-yyyy" value="23-05-2020" readonly
                                #dto="ngbDatepicker"  formControlName="startDate" [class.is-invalid]="isControlInvalid('startDate',this.assessReportFormGroup)"/>
                            <div class="input-group-append" (click)="dto.toggle()">
                                <span class="input-group-text bg-light">
                                    <img src="./../../../assets/date.png" width="24px" height="24px" alt="">
                                </span>
                            </div>
                        </div>
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'startDate',this.assessReportFormGroup)">
                        StartDate is required
                    </div>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Score
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Score" style="width: 100%; height: 40px;"
                        value="76"formControlName="score" [class.is-invalid]="isControlInvalid('score',this.assessReportFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'score',this.assessReportFormGroup)">
                        Score is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Options
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Score" style="width: 100%; height: 40px;"
                        value="76"formControlName="option" [class.is-invalid]="isControlInvalid('option',this.assessReportFormGroup)">
                        <div class="invalid-feedback"
                        *ngIf="controlHasError('required', 'option',this.assessReportFormGroup)">
                        Option is required
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-3">
                </div>
            </div>
        </div>
    </div>
    </form>

    <!-- Working Doc -->
    <div *ngIf="currentStep === 9" class="mt-3"
        style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
        <div class="card p-3" style="border-radius: 15px;">
            <div class="row mt-3">
                <!-- <div class="col-md-4 col-sm-12 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Name
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Name" style="width: 100%; height: 40px;">
                </div> -->
                <div class="col-md-4 col-sm-6 mb-3">
                    <div class="form-group">
                        <label style="font-size: 14px; color: #4F585E;">Upload Document <span>*</span></label>
                        <div class="row">
                            <div class="col-6 col-md-4">
                                <input type="file" class="form-control" id="document" name="document"
                                    (change)="onWorkingDocumentFileSelected($event)"
                                    style="width: 100px; height: 40px; border-radius: 10px;">
                            </div>
                            <div class="col-6 col-md-4 mt-md-0">
                                <button class="btn w-10 h-auto"
                                    style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                            </div>
                            <div class="col-6 col-md-4 mt-2">
                                <p style="font-weight: 500; color: #4F585E;"><b>{{ workingDocSelectedFile?.name }}</b></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-4 col-sm-6 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Options
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Options"
                            style="width: 100%; height: 40px;">
                    </div> -->
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <button class="btn text-center w-10"  (click)="addWorkingDoc()"
                        style="background-color: #233B77; height: 45px; font-size: 14px; border-radius: 10px; color: white;">
                        Add Working Document <img src="./../../../assets/plus.png" style="width: 20px; height: 20px;"
                            alt="">
                    </button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <h4 class="mt-4" style="color: #3C4150;">Products</h4>
                    <div class="table-responsive">
                        <table class="table mt-3">
                            <thead class="table-light">
                                <tr style="color: #4F585E; font-size: 14px;">
                                    <th scope="col">Document</th>
                                    <th scope="col">File Size</th>
                                    <th scope="col">Upload Date</th>
                                    <th scope="col" style="width: 17%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let doc of workingDocData; let i = index;"
                                    style="color: #4F585E; font-size: 14px;">
                                    <td>{{ doc?.docDetails?.name }}</td>
                                    <td>{{ getFileSize(doc?.docDetails?.size) }}MB</td>
                                    <td>{{ this.currentDate }}</td>
                                    <!-- <td>
                                        @if(checkFileType(product?.productImage)){
                                            <img src="../../../assets/pdf.png" alt="uploadFile" width="50">
                                        }@else {
                                            <img [src]="product?.productImage" alt="uploadFile" width="50">
                                        }
                                    </td> -->
                                    <td style="width: 17%; text-align: center;">
                                        <button type="button" class="btn btn-primary btn-sm">
                                            <img src="../../assets/Frame (2).png" class="img-fluid" alt=""> Edit
                                        </button>
                                        <button type="button" class="btn btn-danger btn-sm mx-2"
                                            (click)="deleteWorkinngDoc(i)">
                                            <img src="../../assets/Frame (3).png" class="img-fluid" alt=""> Delete
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attachment -->
    <div *ngIf="currentStep === 10" class="mt-3"
        style="border: 1px solid rgb(229 229 229); border-radius: 10px; padding: 20px;">
        <div class="card p-3" style="border-radius: 15px;">
            <div class="row mt-3">
                <!-- <div class="col-md-4 col-sm-12 mb-3">
                    <label style="font-size: 14px; color: #4F585E;">Name
                        <span>*</span></label>
                    <input type="text" class="form-control" placeholder="Name" style="width: 100%; height: 40px;">
                </div> -->
                <div class="col-md-4 col-sm-6 mb-3">
                    <div class="form-group">
                        <label style="font-size: 14px; color: #4F585E;">Upload Document <span>*</span></label>
                        <div class="row">
                            <div class="col-6 col-md-4">
                                <input type="file" class="form-control" id="attachment" name="attachment"
                                    (change)="onAttachmentFileSelected($event)"
                                    style="width: 100px; height: 40px; border-radius: 10px;">
                            </div>
                            <div class="col-6 col-md-4 mt-md-0">
                                <button class="btn w-10 h-auto"
                                    style="border-radius: 10px; background-color: #233B77; color: white; font-size: 14px;">Upload</button>
                            </div>
                            <div class="col-6 col-md-4 mt-2">
                                <p style="font-weight: 500; color: #4F585E;"><b>{{ attachmentSelectedFile?.name }}</b></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-md-4 col-sm-6 mb-3">
                        <label style="font-size: 14px; color: #4F585E;">Options
                            <span>*</span></label>
                        <input type="text" class="form-control" placeholder="Options"
                            style="width: 100%; height: 40px;">
                    </div> -->
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <button class="btn text-center w-10"  (click)="addAttachment()"
                        style="background-color: #233B77; height: 45px; font-size: 14px; border-radius: 10px; color: white;">
                        Add Working Document <img src="./../../../assets/plus.png" style="width: 20px; height: 20px;"
                            alt="">
                    </button>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12">
                    <h4 class="mt-4" style="color: #3C4150;">Products</h4>
                    <div class="table-responsive">
                        <table class="table mt-3">
                            <thead class="table-light">
                                <tr style="color: #4F585E; font-size: 14px;">
                                    <th scope="col">Document</th>
                                    <th scope="col">File Size</th>
                                    <th scope="col">Upload Date</th>
                                    <th scope="col" style="width: 17%;">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let doc of attachementData; let i = index;"
                                    style="color: #4F585E; font-size: 14px;">
                                    <td>{{ doc?.docDetails?.name }}</td>
                                    <td>{{ getFileSize(doc?.docDetails?.size) }}MB</td>
                                    <td>{{ this.currentDate }}</td>
                                    <!-- <td>
                                        @if(checkFileType(product?.productImage)){
                                            <img src="../../../assets/pdf.png" alt="uploadFile" width="50">
                                        }@else {
                                            <img [src]="product?.productImage" alt="uploadFile" width="50">
                                        }
                                    </td> -->
                                    <td>
                                        <button type="button" class="btn btn-primary btn-sm">
                                            <img src="../../assets/Frame (2).png" class="img-fluid" alt=""> Edit
                                        </button>
                                        <button type="button" class="btn btn-danger btn-sm mx-2"
                                            (click)="deleteAttachment(i)">
                                            <img src="../../assets/Frame (3).png" class="img-fluid" alt=""> Delete
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <div class="row">
          <div class="col-12 col-md-4 col-xl-3">
            <h4 class="card-title mb-0 flex-grow-1" style="font-weight: bold;font-size: 20px;">Music Management</h4>
          </div>
          <div class="col-12 col-md-8 col-xl-9">
            <div class="row justify-content-end">
              <!-- <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3 mb-2">
                <ng-select [multiple]="false" placeholder="Select Location" bindValue="id" [items]="ProgramList"
                  bindLabel="programName">
                  <ng-template ng-option-tmp let-item="item">
                    <ng-option [value]="item.id" [disabled]="item.id === ''">{{ item.programName }}</ng-option>
                  </ng-template>
                </ng-select>
              </div>
              <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3 mb-2">
                <ng-select [multiple]="false" placeholder="Select Product Category" bindValue="id" [items]="ProgramList"
                  bindLabel="programName">
                  <ng-template ng-option-tmp let-item="item">
                    <ng-option [value]="item.id" [disabled]="item.id === ''">{{ item.programName }}</ng-option>
                  </ng-template>
                </ng-select>
              </div>
              <div class="col-12 col-sm-6 col-md-4 col-lg-3 col-xl-3 mb-2 ">

                <input type="date" class="form-control" placeholder="Enter Date" />
              </div> -->
            </div>
          </div>
        </div>





      </div><!-- end card header -->
      <div class="card-body">
        <div class="row">
          <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
            <label class="d-block mb-2"><b>Search</b></label>
            <div class="search-box">
              <input type="text" class="form-control search" placeholder="Search..."  [(ngModel)]="search">
              <i class="ri-search-line search-icon"></i>
          </div>

              
          </div>
          <!-- <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
            <label class="d-block mb-2"><b>Supplier Name</b></label> -->
     <!-- <ng-select
     [(ngModel)]="selectedSupplier"
                      [multiple]="true"
                      placeholder="Select Supplier Name"
                      (change)="onSupplierChange($event)"(clear)="onSupplierClear()" [(ngModel)]="selectedStatus"
                      bindLabel="companyName"
                      bindValue="id"
                      [items]="supplierList"
                        [clearable]="true"
                        class="custom-ng-select"
                        
                    >
                    </ng-select> -->
                    <!-- (change)="onStatusChange($event)"(clear)="onStatusClear()" [(ngModel)]="selectedStatus"   -->
          <!-- </div> -->
          <!-- <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-12 col-sm-12 col-12">
            <label class="d-block mb-2"><b>Product Category</b></label> -->
         <!-- <ng-select
                      [(ngModel)]="selectedCategory"
                      [multiple]="true"
                      placeholder="Select Product Category"
                      bindValue="id"
                      [items]="categoryList"
                      bindLabel="name"
                      [clearable]="true"
                      (clear)="onProductCatrgoryClear()"
                      (change)="onCategoryChange($event)"
                      class="custom-ng-select"
                    >
                    </ng-select> -->
                  
              <!-- </div> -->
          <div class="col-lg-2 d-flex align-items-end">
            <button class="btn btn-primary btn-block" type="button" (click)="resetData()">
              <span>Reset</span>
            </button>
          </div>
        </div>
      <hr>

        <div class="table-responsive">
        
 <table class="table table-gridjs align-middle">
  <thead>
    <tr>
    <th>Sr.No</th>
    <th>Song Title</th>
    <th>Music Category</th>
    <th>Description</th>
    <th>Music Price</th>
    <th>Uploaded By</th>
   
          <th>Uploaded Date And Time</th>
          <th>Uploaded Song</th>
          <th>QR Url</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        @if (datalist?.length > 0) {
          @for (data of datalist; track data.id; let i = $index) {
            <tr >
              <td (click)="openModal(detailsModal,data)">{{ pageNo * itemsPerPage - itemsPerPage + (i + 1) }}</td>
              <td (click)="openModal(detailsModal,data)">{{ data.title }}</td>
              <td (click)="openModal(detailsModal,data)">{{ data.category?data.category:'--' }}</td>
              <td (click)="openModal(detailsModal,data)">{{ data.description }}</td>
              <td (click)="openModal(detailsModal,data)">{{ data.price }}</td>
              <td (click)="openModal(detailsModal,data)">{{ data.userArtistName }}</td>
              <td (click)="openModal(detailsModal,data)">{{ data.createdDateTime?data.createdDateTime:"-" }}</td>
                <td class="truncate-cell" style="max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                <audio #audioPlayer controls style="width: 100%;">
                  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
                  Your browser does not support the audio element.
                </audio>
                </td>
              <td class="truncate-cell">
                <a [href]="data.qrUrl || '#'" target="_blank">{{ data.qrUrl || 'No URL available' }}</a>
              </td>
              <td>
                <label class="switch">
                  <input type="checkbox" [checked]="data.status === 'ACTIVE'"
                    (change)="toggleStatus(data.id, data.status)">
                  <span class="slider round"></span>
                </label>
              </td>
            </tr>
          }
        } @else {
          <tr>
            <td colspan="10" class="text-center">
              <div class="d-flex justify-content-center align-items-center" style="min-height: 300px;">
                <img src="assets/dataNot.png" alt="No Data Available" style="max-width: 400px;">
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>

        </div>
        <div class="row mt-2">
          <div class="col-sm-4">
              <div class="d-flex justify-content-between align-items-center m-1">
                  <div class="d-flex align-items-center">
                      <label class="d-flex align-items-center">
                          <span style="margin-right: 6px">Show </span>
                          <select class="form-control form-select form-select mx-25" [(ngModel)]="itemsPerPage"
                              (change)="itemsPerPageChange($event)">
                              <option value="10">10</option>
                              <option value="25">25</option>
                              <option value="50">50</option>
                              <option value="100">100</option>
                          </select>
                      </label>
                  </div>
              </div>
          </div>
          <div class="col-sm-8 mt-1">
              <pagination-controls id="dataPagination" (pageChange)="pageNoChange($event); pageNo = $event">
              </pagination-controls>
          </div>
      </div>
      </div>
     <!-- end card-body -->
    </div><!-- end card -->
  </div>
  <!-- end col -->
</div>




<ng-template #detailsModal let-modal class="p-4 border" style="border: 2px solid #ccc; border-radius: 8px;">
  <div class="modal-header">
    <h5 class="modal-title">View Details</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <hr>
  <div class="modal-body">
    <div class="row">
      <div class="col-md-4">
        <p><strong>Title:</strong> {{ selectedItem?.title || ' ' }}</p>
        <p><strong>Description:</strong> {{ selectedItem?.description }}</p>
        <p><strong>Price:</strong> {{ selectedItem?.price | currency:selectedItem?.currency }}</p>
        <p><strong>Artist:</strong> {{ selectedItem?.userArtistName }}</p>
        <p><strong>Status:</strong> <span class="badge bg-success">{{ selectedItem?.status }}</span></p>
      </div>
      <div class="col-md-4">
        <img *ngIf="selectedItem?.imageUrl" [src]="selectedItem.imageUrl" style="max-width: 200px; height: 70%;">
      </div>
    </div>
    <hr>
    <label ><strong>Audio:</strong></label>
    <div class="text-center">
      <audio *ngIf="selectedItem?.audioUrl" controls>
        <source [src]="selectedItem.audioUrl" type="audio/mpeg">
        Your browser does not support the audio element.
      </audio>
    </div>
    <hr>
    <label ><strong>Video:</strong></label>
    <div class="text-center">
      <video *ngIf="selectedItem?.videoUrl" controls class="w-100">
        <source [src]="selectedItem.videoUrl" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
  </div>
</ng-template>
   